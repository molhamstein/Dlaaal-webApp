{"version":3,"sources":["webpack:///index.min.js","webpack:///webpack/bootstrap 6bcd96991e2ebed46275","webpack:///./index.ts"],"names":["module","exports","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","value","DOC_ORIENTATION","ImageCompress","getOrientation","file","callback","reader","FileReader","onload","$event","view","DataView","result","getUint16","length","byteLength","offset","marker","getUint32","little","tags","readAsArrayBuffer","e","uploadFile","render","callBack","inputElement","createElement","setStyle","setProperty","listen","console","log","target","files","myReader","onloadend","orientation","readAsDataURL","click","compress","imageDataUrlSource","ratio","quality","Promise","resolve","reject","sourceImage","Image","w","h","canvas","ctx","getContext","naturalWidth","naturalHeight","Right","Left","t","width","height","TO_RADIANS","Math","PI","Up","drawImage","save","rotate","translate","restore","Down","error","mime","substr","toDataURL","src"],"mappings":"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","file":"./index.min.js","sourcesContent":["module.exports =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(1);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DOC_ORIENTATION\", function() { return DOC_ORIENTATION; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ImageCompress\", function() { return ImageCompress; });\nvar DOC_ORIENTATION;\n(function (DOC_ORIENTATION) {\n    DOC_ORIENTATION[DOC_ORIENTATION[\"Up\"] = 1] = \"Up\";\n    DOC_ORIENTATION[DOC_ORIENTATION[\"Down\"] = 3] = \"Down\";\n    DOC_ORIENTATION[DOC_ORIENTATION[\"Right\"] = 6] = \"Right\";\n    DOC_ORIENTATION[DOC_ORIENTATION[\"Left\"] = 8] = \"Left\";\n    DOC_ORIENTATION[DOC_ORIENTATION[\"UpMirrored\"] = 2] = \"UpMirrored\";\n    DOC_ORIENTATION[DOC_ORIENTATION[\"DownMirrored\"] = 4] = \"DownMirrored\";\n    DOC_ORIENTATION[DOC_ORIENTATION[\"LeftMirrored\"] = 5] = \"LeftMirrored\";\n    DOC_ORIENTATION[DOC_ORIENTATION[\"RightMirrored\"] = 7] = \"RightMirrored\";\n    DOC_ORIENTATION[DOC_ORIENTATION[\"NotJpeg\"] = -1] = \"NotJpeg\";\n    DOC_ORIENTATION[DOC_ORIENTATION[\"NotDefined\"] = -2] = \"NotDefined\";\n})(DOC_ORIENTATION || (DOC_ORIENTATION = {}));\nvar ImageCompress = /** @class */ (function () {\n    function ImageCompress() {\n    }\n    /**\n     * Get the correct Orientation value from tags, in order to write correctly in our canvas\n     * @param {File} file\n     * @param {(result: DOC_ORIENTATION) => void} callback\n     */\n    ImageCompress.getOrientation = function (file, callback) {\n        var reader = new FileReader();\n        try {\n            reader.onload = function ($event) {\n                var view = new DataView(reader.result);\n                if (view.getUint16(0, false) != 0xFFD8)\n                    return callback(-2);\n                var length = view.byteLength, offset = 2;\n                while (offset < length) {\n                    var marker = view.getUint16(offset, false);\n                    offset += 2;\n                    if (marker == 0xFFE1) {\n                        if (view.getUint32(offset += 2, false) != 0x45786966)\n                            return callback(-1);\n                        var little = view.getUint16(offset += 6, false) == 0x4949;\n                        offset += view.getUint32(offset + 4, little);\n                        var tags = view.getUint16(offset, little);\n                        offset += 2;\n                        for (var i = 0; i < tags; i++)\n                            if (view.getUint16(offset + (i * 12), little) == 0x0112)\n                                return callback(view.getUint16(offset + (i * 12) + 8, little));\n                    }\n                    else if ((marker & 0xFF00) != 0xFF00)\n                        break;\n                    else\n                        offset += view.getUint16(offset, false);\n                }\n                return callback(-1);\n            };\n            reader.readAsArrayBuffer(file);\n        }\n        catch (e) {\n            return callback(0);\n        }\n    };\n    /**\n     * return a callback with the new image data and image orientation\n     * @param render\n     * @param callBack\n     */\n    ImageCompress.uploadFile = function (render, callBack) {\n        var inputElement = render.createElement(\"input\");\n        render.setStyle(inputElement, \"display\", \"none\");\n        render.setProperty(inputElement, \"type\", \"file\");\n        render.listen(inputElement, \"click\", function ($event) {\n            //javascript teachable moment\n            console.log('MouseEvent:', $event);\n            console.log('Input:', $event.target);\n            $event.target.value = null;\n        });\n        render.listen(inputElement, \"change\", function ($event) {\n            var file = $event.target.files[0];\n            var myReader = new FileReader();\n            myReader.onloadend = function (e) {\n                try {\n                    ImageCompress.getOrientation(file, function (orientation) {\n                        callBack(myReader.result, orientation);\n                    });\n                }\n                catch (e) {\n                    console.log(\"ERROR \" + e);\n                    callBack(null, null);\n                }\n            };\n            try {\n                myReader.readAsDataURL(file);\n            }\n            catch (e) {\n                console.log(\"ERROR - probably no file have been selected: \" + e);\n                callBack(null, null);\n            }\n        });\n        inputElement.click();\n    };\n    ImageCompress.compress = function (imageDataUrlSource, orientation, render, ratio, quality) {\n        if (ratio === void 0) { ratio = 50; }\n        if (quality === void 0) { quality = 50; }\n        return new Promise(function (resolve, reject) {\n            quality = quality / 100;\n            ratio = ratio / 100;\n            var sourceImage = new Image();\n            //important for safari: we need to wait for onload event\n            sourceImage.onload = function () {\n                var canvas = render.createElement('canvas');\n                var ctx = canvas.getContext(\"2d\");\n                var w, h;\n                w = sourceImage.naturalWidth;\n                h = sourceImage.naturalHeight;\n                if (orientation == DOC_ORIENTATION.Right || orientation == DOC_ORIENTATION.Left) {\n                    var t = w;\n                    w = h;\n                    h = t;\n                }\n                canvas.width = w * ratio;\n                canvas.height = h * ratio;\n                var TO_RADIANS = Math.PI / 180;\n                if (orientation == DOC_ORIENTATION.Up) {\n                    ctx.drawImage(sourceImage, 0, 0, canvas.width, canvas.height);\n                }\n                else if (orientation == DOC_ORIENTATION.Right) {\n                    ctx.save();\n                    ctx.rotate(90 * TO_RADIANS);\n                    ctx.translate(0, -canvas.width);\n                    ctx.drawImage(sourceImage, 0, 0, canvas.height, canvas.width);\n                    ctx.restore();\n                }\n                else if (orientation == DOC_ORIENTATION.Left) {\n                    ctx.save();\n                    ctx.rotate(-90 * TO_RADIANS);\n                    ctx.translate(-canvas.width, 0);\n                    ctx.drawImage(sourceImage, 0, 0, canvas.height, canvas.width);\n                    ctx.restore();\n                }\n                else if (orientation == DOC_ORIENTATION.Down) {\n                    ctx.save();\n                    ctx.rotate(180 * TO_RADIANS);\n                    ctx.translate(-canvas.width, -canvas.height);\n                    ctx.drawImage(sourceImage, 0, 0, canvas.width, canvas.height);\n                    ctx.restore();\n                }\n                else {\n                    console.error('Wrong orientation value');\n                    //same as default UP\n                    ctx.drawImage(sourceImage, 0, 0, canvas.width, canvas.height);\n                }\n                var mime = imageDataUrlSource.substr(5, imageDataUrlSource[0].length);\n                //TODO test on mime\n                var result = canvas.toDataURL(mime, quality);\n                resolve(result);\n            };\n            sourceImage.src = imageDataUrlSource;\n        });\n    };\n    return ImageCompress;\n}());\n\n\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// index.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6bcd96991e2ebed46275","import { Renderer2} from \"@angular/core\";\n\nexport enum DOC_ORIENTATION{\n    Up=1,\n    Down=3,\n    Right=6,\n    Left=8,\n    UpMirrored=2,\n    DownMirrored=4,\n    LeftMirrored=5,\n    RightMirrored=7,\n    NotJpeg=-1,\n    NotDefined=-2\n}\n\n\nexport class ImageCompress {\n\n\n    /**\n     * Get the correct Orientation value from tags, in order to write correctly in our canvas\n     * @param {File} file\n     * @param {(result: DOC_ORIENTATION) => void} callback\n     */\n    static getOrientation(file:File, callback:(result:DOC_ORIENTATION)=>void) {\n        let reader = new FileReader();\n        try{\n            reader.onload = function($event) {\n                let view = new DataView(reader.result);\n                if (view.getUint16(0, false) != 0xFFD8) return callback(-2);\n                let length = view.byteLength, offset = 2;\n                while (offset < length) {\n                    let marker = view.getUint16(offset, false);\n                    offset += 2;\n                    if (marker == 0xFFE1) {\n                        if (view.getUint32(offset += 2, false) != 0x45786966) return callback(-1);\n                        let little = view.getUint16(offset += 6, false) == 0x4949;\n                        offset += view.getUint32(offset + 4, little);\n                        let tags = view.getUint16(offset, little);\n                        offset += 2;\n                        for (let i = 0; i < tags; i++)\n                            if (view.getUint16(offset + (i * 12), little) == 0x0112)\n                                return callback(view.getUint16(offset + (i * 12) + 8, little));\n                    }\n                    else if ((marker & 0xFF00) != 0xFF00) break;\n                    else offset += view.getUint16(offset, false);\n                }\n                return callback(-1);\n            };\n            reader.readAsArrayBuffer(file);\n        }catch(e){\n            return callback(0);\n        }\n\n    }\n\n    /**\n     * return a callback with the new image data and image orientation\n     * @param render\n     * @param callBack\n     */\n    static uploadFile(render: Renderer2, callBack: (image: string,orientation:DOC_ORIENTATION) => void) {\n        let inputElement = render.createElement(\"input\");\n        render.setStyle(inputElement, \"display\", \"none\");\n        render.setProperty(inputElement, \"type\", \"file\");\n\n        render.listen(inputElement, \"click\", ($event) => {\n            //javascript teachable moment\n            console.log('MouseEvent:',$event);\n            console.log('Input:',$event.target);\n            $event.target.value = null;\n        });\n\n\n        render.listen(inputElement, \"change\", ($event) => {\n            let file: File = $event.target.files[0];\n\n            let myReader: FileReader = new FileReader();\n\n            myReader.onloadend = (e) => {\n                try {\n                    ImageCompress.getOrientation(file,orientation=>{\n                        callBack(myReader.result,orientation);\n                    });\n                } catch (e) {\n                    console.log(`ERROR ${e}`);\n                    callBack(null,null);\n                }\n            };\n\n            try {\n                myReader.readAsDataURL(file);\n            } catch (e) {\n                console.log(`ERROR - probably no file have been selected: ${e}`);\n                callBack(null,null);\n            }\n\n        });\n        inputElement.click();\n    }\n\n\n\n\n\n    static compress(imageDataUrlSource: string, orientation:DOC_ORIENTATION, render: Renderer2, ratio: number = 50, quality: number = 50): Promise<string> {\n\n        return new Promise((resolve, reject) => {\n\n            quality = quality / 100;\n            ratio = ratio / 100;\n            const sourceImage = new Image();\n\n            //important for safari: we need to wait for onload event\n            sourceImage.onload = function () {\n                const canvas: HTMLCanvasElement = render.createElement('canvas');\n                const ctx: CanvasRenderingContext2D = canvas.getContext(\"2d\");\n\n                let w, h;\n                w = sourceImage.naturalWidth;\n                h = sourceImage.naturalHeight;\n\n                if(orientation== DOC_ORIENTATION.Right || orientation == DOC_ORIENTATION.Left){\n                    let t = w;\n                    w = h;\n                    h = t;\n                }\n\n                canvas.width = w * ratio;\n                canvas.height = h * ratio;\n\n\n                const TO_RADIANS = Math.PI/180;\n\n                if(orientation == DOC_ORIENTATION.Up){\n\n                    ctx.drawImage(sourceImage, 0, 0, canvas.width, canvas.height);\n\n                }else if(orientation == DOC_ORIENTATION.Right){\n\n                    ctx.save();\n                    ctx.rotate(90 * TO_RADIANS);\n                    ctx.translate(0,-canvas.width);\n                    ctx.drawImage(sourceImage, 0, 0,canvas.height, canvas.width);\n                    ctx.restore();\n\n                }else if(orientation == DOC_ORIENTATION.Left){\n\n                    ctx.save();\n                    ctx.rotate(-90 * TO_RADIANS);\n                    ctx.translate(-canvas.width,0);\n                    ctx.drawImage(sourceImage, 0, 0,canvas.height, canvas.width);\n                    ctx.restore();\n\n                }else if(orientation == DOC_ORIENTATION.Down){\n\n                    ctx.save();\n                    ctx.rotate(180 * TO_RADIANS);\n                    ctx.translate(-canvas.width,-canvas.height);\n                    ctx.drawImage(sourceImage, 0, 0,canvas.width, canvas.height);\n                    ctx.restore();\n\n                }else{\n                    console.error('Wrong orientation value');\n                    //same as default UP\n                    ctx.drawImage(sourceImage, 0, 0, canvas.width, canvas.height);\n                }\n\n\n\n                let mime = imageDataUrlSource.substr(5, imageDataUrlSource[0].length);\n                //TODO test on mime\n                let result = canvas.toDataURL(mime, quality);\n\n                resolve(result);\n\n            };\n\n            sourceImage.src = imageDataUrlSource;\n\n        });\n\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./index.ts"],"sourceRoot":""}